<!DOCTYPE html>
<html lang="ch-n">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="css/umi.aff7b14b.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <title>拾柒-REFLECT &amp; RELEARN</title>
    <link rel="icon" href="https://www.shiqichuban.com/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/font.css">
    <script>window.routerBase = "/";</script>
    <link rel="stylesheet" type="text/css" href="css/vendors.55842355.chunk.css">
    <script charset="utf-8" src="js/vendors.80c279a0.async.js"></script>
    <link rel="stylesheet" type="text/css"
          href="css/layouts__GlobalTemplate.4a2a739e.chunk.css">
    <!--<script charset="utf-8" src="js/layouts__GlobalTemplate.13c6326e.async.js"></script>-->
    <!--<script charset="utf-8" src="js/p__Book__BookShelf.4e6f488c.async.js"></script>-->
    <!--<script charset="utf-8" src="js/p__ShoppingCart__index.066f207f.async.js"></script>-->
</head>
<body>
<noscript>Sorry, we need js to run correctly!</noscript>
<div id="root">
    <div>
        <div style="height: 60px; overflow: visible; box-shadow: rgba(221, 218, 218, 0.51) 1px 1px 5px;">
            <div style="position: relative; margin: auto; max-width: 1100px; height: 60px;">
                <div style="position: absolute; top: 0px; left: 0px; width: 94px; height: 60px; line-height: 60px;"><img
                        alt="拾柒" src="images/logo40.png" style="width: 100%;"></div>
                <div style="position: absolute; bottom: 0px; right: 0px;">
                    <div style="float: right;">
                        <ul class="ant-menu antd-pro-layouts-global-customMenu ant-menu-light ant-menu-root ant-menu-horizontal"
                            role="menu" style="font-size: 12px; border: 1px solid transparent;">
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true" id="setting"><span
                                        class="submenu-title-wrapper">我的设置 </span>
                                    <i class="ant-menu-submenu-arrow"></i>
                                    <i><img class="my_icon_img2" src="images/card_info_desc_icon.png"></i>
                                    <div id="setting_ul"
                                         style="position: absolute; z-index: 1000; width: 120px; right: 0px; top: 46px; background-color: rgb(255, 255, 255); padding-top: 15px; border-radius: 4px; box-shadow: rgb(204, 204, 204) 0px 1px 4px; display: none;">
                                        <p style="text-align: center;"><a href="account.html" style="text-decoration:none;color: black">账户设置</a></p>
                                        <p style="text-align: center;"><a href="#" style="text-decoration:none;color: black">会员中心</a></p>
                                        <p style="text-align: center;" id="logout_btn"><a href="javascript:void(0)" style="text-decoration:none;color: black">退出登录</a></p>
                                        <p style="position: absolute;left:50%;top:-20px;width:0;height: 0;border:10px solid rgba(0,0,0,0);border-bottom-color:#fff;"></p>
                                    </div>

                                </div>
                            </li>

                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem"
                                style="font-size: 12px; border: 1px solid transparent; visibility: hidden; position: absolute; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                        </ul>
                    </div>
                    <div style="float: right; height: 100%;">
                        <div class="ant-divider ant-divider-vertical" style="height: 20px; margin-top: 15px;"></div>
                    </div>
                    <div style="float: right;">
                        <ul class="ant-menu antd-pro-layouts-global-customMenu ant-menu-light ant-menu-root ant-menu-horizontal"
                            role="menu" style="font-size: 12px; border: 1px solid transparent;">
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-item" role="menuitem"><a
                                    href="sy_index.html">个人主页</a></li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-item" role="menuitem"><a
                                    href="sq_copy.html">印制中心</a></li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-item" role="menuitem"><a
                                    href="order.html">我的订单</a></li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-item" role="menuitem"><a
                                    href="zuoping.html">我的作品</a></li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem" style="font-size: 12px; border: 1px solid transparent; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal " role="menuitem">
                                <div id="my_sq" class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true" >
                                    <span class="submenu-title-wrapper">我的拾柒</span>
                                    <i class="ant-menu-submenu-arrow"></i>
                                    <i><img class="my_icon_img" src="images/card_info_desc_icon.png"></i>
                                    <div class="my_list"
                                         style="display: none;position: absolute;z-index:1000;width: 120px;right:0px;top:46px;background-color: #fff;padding-top:15px;border-radius: 4px;box-shadow: 0px 1px 4px #ccc;">
                                        <p style="text-align: center;"><a href="integral.html" style="text-decoration:none;color: black">我的积分</a></p>
                                        <p style="text-align: center;" id="messagebox" style="text-decoration:none;color: black">我的消息</p>
                                        <p style="position: absolute;left:50%;top:-20px;width:0;height: 0;border:10px solid rgba(0,0,0,0);border-bottom-color:#fff;"></p>
                                    </div>
                                </div>
                            </li>
                            <li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu"
                                role="menuitem"
                                style="font-size: 12px; border: 1px solid transparent; visibility: hidden; position: absolute; display: none;">
                                <div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true">
                                    <span>···</span><i class="ant-menu-submenu-arrow"></i></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div style="min-height: 528px;">
            <div style="max-width: 1100px; margin: auto;">
                <div style="position: relative; margin-top: 20px; user-select: none;">
                    <div style="margin-top: 50px; color: rgb(51, 51, 51); font-weight: bold; font-size: 14px;">我的购物车
                    </div>
                    <div class="ant-divider ant-divider-horizontal"
                         style="height: 2px; background-color: rgb(51, 51, 51);"></div>
                    <div>
                        <div class="ant-list ant-list-split">
                            <div class="ant-spin-nested-loading">
                                <div class="ant-spin-container">
                                    <ul class="ant-list-items">
                                        <div style="display: flex; justify-content: space-between; align-items: center; height: 200px; letter-spacing: 1px;">
                                            <div style="display: flex; justify-content: flex-start; flex-direction: row; align-items: center; width: 200px;">
                                                <label class="ant-checkbox-wrapper ant-checkbox-wrapper-checked"><span
                                                        class="ant-checkbox ant-checkbox-checked"><input type="checkbox"
                                                                                                         class="ant-checkbox-input"
                                                                                                         value=""
                                                                                                         checked=""><span
                                                        class="ant-checkbox-inner"></span></span></label>
                                                <div style="width: 100px; margin-left: 50px;"><img alt="封面" src="" id="cover" style="width: 100px; height: auto; box-shadow: rgb(204, 204, 204) 0px 0px 3px;">
                                                </div>
                                                <div style="display: flex; justify-content: space-between; flex-direction: column; height: 150px; margin-left: 30px; padding: 10px 0px;">
                                                    <span style="color: rgb(0, 0, 0); font-weight: bold; width: 150px; overflow: hidden; white-space: nowrap;" id="bookname"></span>
                                                    <div style="font-size: 12px; color: rgb(102, 102, 102);">
                                                        <div id="pageNum"></div>
                                                        <div style="margin-top: 10px;" id="sizeNum"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="position: relative; height: 30px; width: 200px; margin-left: 100px; background-color: rgb(249, 249, 249); font-size: 14px; line-height: 2.14286; padding: 0px 10px; border-radius: 5px; overflow-x: auto; cursor: pointer;">
                                                <span style="pointer-events: none;">装帧:</span><span
                                                    style="pointer-events: none;" id="explain"></span><span
                                                    style="pointer-events: none;">
                                                     <!--<i aria-label="图标: down"-->
                                                <!--class="anticon anticon-down"><svg-->
                                                <!--viewBox="64 64 896 896" class="" data-icon="down" width="1em"-->
                                                <!--height="1em" fill="currentColor" aria-hidden="true"-->
                                                <!--focusable="false"><path-->
                                                <!--d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i>-->
                                            </span>
                                            </div>
                                            <div style="width: 100px;" id="price"></div>
                                            <div style="display: flex;">
                                                <button type="button" class="ant-btn ant-btn-default" onclick="reduce()"
                                                        style="width: 30px; height: 30px; padding: 0px; border-radius: 2px; border: 1px solid rgb(151, 151, 151); text-align: center; line-height: 1; font-size: 20px; cursor: pointer;">
                                                    <span>-</span></button>
                                                <input type="text" class="ant-input" value=""
                                                       style="width: 60px; height: 30px; border-top: 1px solid rgb(151, 151, 151); border-bottom: 1px solid rgb(151, 151, 151); border-radius: 0px; text-align: center; line-height: 2.14286; font-size: 14px;" id="num">
                                                <button type="button" class="ant-btn"
                                                        style="width: 30px; height: 30px; padding: 0px; border-radius: 2px; border: 1px solid rgb(151, 151, 151); text-align: center; line-height: 1; font-size: 20px; cursor: pointer;" onclick="add()">
                                                    <span>+</span></button>
                                            </div>
                                            <div style="color: rgb(0, 0, 0); font-size: 12px; cursor: pointer; display: none;">
                                                删除
                                            </div>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ant-divider ant-divider-horizontal"
                         style="height: 2px; background-color: rgb(51, 51, 51);"></div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: rgb(0, 0, 0); font-size: 14px;"><label class="ant-checkbox-wrapper"><span
                                class="ant-checkbox ant-checkbox-checked">
                            <input type="checkbox"  class="ant-checkbox-input" value=""checked=""><span
                                class="ant-checkbox-inner"></span></span></label><span
                                style="margin-left: 20px;">全选</span>
                            <div class="ant-divider ant-divider-verticle" style="height: 14px;"></div>
                            <span style="margin-left: 10px;">已选 1 件</span></div>
                        <div><span style="font-size: 18px; color: rgb(243, 134, 139);"id="total"></span>
                            <button type="button" class="ant-btn ant-btn-primary"style="width: 144px; height: 34px; margin-left: 100px; padding: 0px 20px; font-size: 14px;" onclick="next()">
                                <span>下一步</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="height: 60px; background: rgb(74, 74, 74); text-align: center; line-height: 5; color: rgb(255, 255, 255);">
            拾柒网络技术（北京）有限公司 &gt;&gt; 京ICP备15043038
        </div>
    </div>
</div>
<style></style>
<script src="js/jquery-3.2.1.js"></script>
<script src="layer/2.4/layer.js"></script>

<script>
    $(()=>{
        queryById();
    })
    function queryById() {
        var bid = localStorage.getItem("bid");
        $.ajax({
            type:"post",
            url:"queryById",
            data:{"bid":bid},
            dataType:"json",
            success:function (data) {
                console.log(data)
                $("#cover").attr("src","text/"+data.bookurl);
                $("#bookname").html(data.bname);
                $("#pageNum").html("页数:"+data.bpage);
                $("#sizeNum").html("尺寸:"+data.bsize);
                $("#explain").html(data.bway);
                $("#price").html("￥"+data.bprice);
                $("#total").html("总价:"+data.bnumber*data.bprice);
                $("#num").val(data.bnumber);
                localStorage.setItem("num",data.bnumber)
            }
        })
    }
    function add() {
        var num = $("#num").val()
        num = parseInt(num)+1;
        $("#num").val(num)

        $.ajax({
            type:"post",
            url:"addNumberPrice",
            dataType:"json",
            success:function (data) {
                console.log(data)
                if(data>1){
                    queryById();
                }
            }
        })
    }
    function reduce() {
        var num = $("#num").val()

        if (num>1){
            var nums = num-1
            $("#num").val(nums);
        }else {
            layer.msg("不能再减了哟",{icon:2,time:1000})
        }


        $.ajax({
            type:"post",
            url:"reduceNumberPrice",
            dataType:"json",
            success:function (data) {
                if (data>1){
                    queryById();
                }
            }
        })
    }
    //点击下一步
    function next() {
        var bid = localStorage.getItem("bid");
        var num = localStorage.getItem("num");
        console.log(bid+"---"+num)
        $.ajax({
            type:"post",
            url:"addOrdermore",
            data:{"bid":bid,"ordint":num,"ordstatus":"等待付款"},
            dataType:"json",
            success:function (data) {
                console.log(data);
                if (data>0){
                    location.href="confirm_order.html";
                }
            }
        })
    }
    $("#my_sq").on('mouseover',function () {
        $('.my_list').show();
        $('.my_icon_img').css({
            'transform': 'rotate(90deg)',
            '-webkit-transform': 'rotate(90deg)',
            '-ms-transform': 'rotate(90deg)',
            '-moz-transform': 'rotate(90deg)',
            '-o-transform': 'rotate(90deg)',
        })
    })
    $("#my_sq").on('mouseout',function () {
        $('.my_list').hide();
        $('.my_icon_img').css({
            'transform': 'rotate(0)',
            '-webkit-transform': 'rotate(0)',
            '-ms-transform': 'rotate(0)',
            '-moz-transform': 'rotate(0)',
            '-o-transform': 'rotate(0)',
        })
    })
    $("#setting").on('mouseover',function () {
        $('#setting_ul').show();
        $('.my_icon_img2').css({
            'transform': 'rotate(90deg)',
            '-webkit-transform': 'rotate(90deg)',
            '-ms-transform': 'rotate(90deg)',
            '-moz-transform': 'rotate(90deg)',
            '-o-transform': 'rotate(90deg)',
        })
    })
    $("#setting").on('mouseout',function () {
        $('#setting_ul').hide();
        $('.my_icon_img2').css({
            'transform': 'rotate(0)',
            '-webkit-transform': 'rotate(0)',
            '-ms-transform': 'rotate(0)',
            '-moz-transform': 'rotate(0)',
            '-o-transform': 'rotate(0)',
        })
    })
</script>
</body>
</html>