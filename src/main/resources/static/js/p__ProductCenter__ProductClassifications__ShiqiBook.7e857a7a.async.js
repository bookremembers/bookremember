(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{HLXc:function(t,e,i){"use strict";i.r(e);i("cMPq");var a,n,r,o=i("CEb8"),l=i("Pjwa"),c=i.n(l),s=i("2cji"),d=i.n(s),u=i("sp3j"),m=i.n(u),h=i("vZkh"),p=i.n(h),g=i("+KCP"),v=i.n(g),k=i("uqIC"),y=i.n(k),f=i("LneV"),I=i("fS8W"),b=i("lL4n"),S=i("QYTg"),w=i("7qcp"),z=i("Wpfz"),T=i("wg6K"),A=(a=Object(f["connect"])(function(t){var e=t.center;return{center:e}}),a((r=function(t){function e(t){var i;return c()(this,e),i=m()(this,p()(e).call(this,t)),i.getProductDetail=function(t){var e=i.props.dispatch;e({type:"center/productDetail",payload:t})},i.state={routes:[{href:"/center",label:"\u5370\u5236\u54c1"},{href:"",label:""}],sizeImageArr:[],columnImageArr:[],contentArr:[],bottomProductList:[],loading:!1},i.selectedSizeIndex=0,i.topTitle="",i.topSubTitle="",i.currentProductName="hardcover",i}return v()(e,t),d()(e,[{key:"componentWillMount",value:function(){this.getProductDetail({categoryId:this.props.match.params.categoryId,callback:this.initProductDetail.bind(this)})}},{key:"initProductDetail",value:function(t){var e=t.banners,i=t.list,a=t.name,n=t.intro,r=t.detail,o=t.also_make;this.topTitle=a,this.topSubTitle=n;var l=this.state.routes;l[l.length-1].label=a;var c=e.map(function(t){return{url:t.image,height:143,width:143}}),s=r.map(function(t){return"image"==t.media_type?{tagName:"img",attrs:{src:t.url,style:{width:820,display:"block",margin:"0 auto"}},marginBottom:55}:"video"==t.media_type?{tagName:"video",attrs:{src:t.url,style:{height:415,width:820,display:"block",margin:"0 auto"},controls:!0,poster:t.image},marginBottom:55}:void 0}),d=o.map(function(t){return{url:t.image,height:192,width:188,itemCursor:"pointer",href:"".concat(t.url,"/").concat(t.category_id)}});if(i){var u=i.map(function(t){return{url:t.image.url,height:t.image.height,width:t.image.width,itemCursor:"pointer",alt:t.intro,isSelected:!1,productId:t.product_id,title:{titleText:t.intro,subTitleText:t.name}}});this.setState({sizeImageArr:[].concat(u)}),this.updateSizeList()}this.setState({columnImageArr:[].concat(c),routes:[].concat(l),contentArr:[].concat(s),bottomProductList:[].concat(d)})}},{key:"creatBook",value:function(t){var e=this.props.dispatch;e({type:"center/CreatBook",payload:t})}},{key:"updateSizeList",value:function(){for(var t=this.state.sizeImageArr,e=0,i=t.length;e<i;e++)e===this.selectedSizeIndex?t[e].isSelected=!0:t[e].isSelected=!1;this.setState({sizeImageArr:[].concat(t)})}},{key:"renderTopBlockContent",value:function(){return y.a.createElement(w["a"],{columnImageArr:this.state.columnImageArr,sizeImageArr:this.state.sizeImageArr,sizeListOnClickHandler:this.sizeListOnClickHandler.bind(this),makeBtnOnClickHandler:this.makeBtnOnClickHandler.bind(this),largeImg:i("lkkR"),topTitle:this.topTitle,topSubTitle:this.topSubTitle})}},{key:"renderContent",value:function(){var t=this.state.contentArr;return y.a.createElement(S["a"],{contentArr:t,listWidth:"100%"})}},{key:"sizeListOnClickHandler",value:function(t,e){e!==this.selectedSizeIndex&&(this.selectedSizeIndex=e,this.updateSizeList())}},{key:"initScroll",value:function(){window.scrollTo(0,0)}},{key:"makeBtnOnClickHandler",value:function(){var t=this;this.setState({loading:!0});var e=this.state.sizeImageArr[this.selectedSizeIndex].productId;this.creatBook({productId:e,callback:function(e){t.setState({loading:!1}),window.location.href=e.edit_url}})}},{key:"componentDidUpdate",value:function(t){var e=t.match.params.categoryId,i=this.props.match.params.categoryId;i!==e&&(this.initScroll(),this.getProductDetail({categoryId:i,callback:this.initProductDetail.bind(this)}))}},{key:"render",value:function(){return y.a.createElement("div",{style:{width:"100%",margin:"auto",paddingTop:48}},y.a.createElement(T["a"],{loading:this.state.loading}),y.a.createElement("div",{style:{marginBottom:40}},y.a.createElement(I["a"],{routes:this.state.routes,separator:"-"})),y.a.createElement("div",{style:{margin:"0 auto",marginBottom:70,width:964}},this.renderTopBlockContent()),y.a.createElement("div",{style:{marginBottom:40}},y.a.createElement(b["a"],{titleText:"\u4ea7\u54c1\u4ecb\u7ecd",titleSubText:"INFORMATION",lineWidth:810})),y.a.createElement("div",null,this.renderContent()),y.a.createElement("div",{style:{margin:"0 auto",marginBottom:33,width:840}},y.a.createElement(o["a"],{dashed:!0,style:{width:840}},y.a.createElement("div",{style:{fontSize:16,color:"#333"}},"\u4f60\u8fd8\u53ef\u4ee5\u505a\u4ec0\u4e48"))),y.a.createElement("div",{style:{margin:"0 auto",marginBottom:318,width:820}},y.a.createElement(z["a"],{imageArr:this.state.bottomProductList})))}},{key:"componentWillUnmount",value:function(){this.initScroll()}}]),e}(k["PureComponent"]),n=r))||n);e["default"]=A}}]);